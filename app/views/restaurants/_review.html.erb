<div id="reviews">
  <div data-insert-in-list-target="items">
    <% restaurant.reviews.reverse.each do |review| %>
      <div data-controller="edit-review" data-edit-review-target="card">
        <div id="review<%= review.id %>" class="review m-4" data-edit-review-target="infos">

          <%= render partial: "stars", locals: {review: review} %>

          <% if review.user == current_user %>
            <i class="far fa-edit review-edit-btn ml-2" data-action="click->edit-review#displayForm"></i>
          <% end %>

          <% if review.user.username.nil? %>
            <p class="text-muted"><em><%= review.user.email %></em></p>
          <% else %>
            <p class="text-muted"><em><%= review.user.username %></em></p>
          <% end %>

          <p class="review-content mt-2"><%= review.content %></p>

        </div>
        <%= render partial: "reviews/edit_review_form", locals: {restaurant: restaurant, review: review} %>
      </div>
    <% end %>
  </div>
</div>
